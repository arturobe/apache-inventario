<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>DIAGNÓSTICO SISTEMA</title>
</head>
<body>
    <h1>DIAGNÓSTICO DEL SISTEMA</h1>
    <button id="test-btn">BOTÓN DE PRUEBA</button>
    <div id="output"></div>

    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <script>
        console.log('=== DIAGNÓSTICO INICIADO ===');
        
        // 1. Verificar carga de Supabase
        console.log('Supabase disponible:', typeof window.supabase);
        
        // 2. Definir clase de prueba
        class TestSystem {
            constructor() {
                this.nombre = 'TestSystem';
                console.log('TestSystem creado exitosamente');
            }
            
            saludar() {
                console.log('TestSystem funcionando correctamente');
                alert('TestSystem funciona!');
            }
        }
        
        console.log('Clase TestSystem definida:', typeof TestSystem);
        
        // 3. Intentar crear instancia
        try {
            window.testSystem = new TestSystem();
            console.log('Instancia creada:', !!window.testSystem);
        } catch (error) {
            console.error('ERROR creando instancia:', error);
        }
        
        // 4. Event listener
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM cargado');
            
            const btn = document.getElementById('test-btn');
            if (btn) {
                btn.onclick = () => {
                    console.log('CLICK DETECTADO');
                    if (window.testSystem) {
                        window.testSystem.saludar();
                    }
                };
                console.log('Event listener asignado');
            }
        });
        
        console.log('=== DIAGNÓSTICO COMPLETADO ===');
    </script>
</body>
</html>
